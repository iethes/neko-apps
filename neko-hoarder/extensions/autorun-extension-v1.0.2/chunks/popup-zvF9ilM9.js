(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();try{}catch(e){console.error("[wxt] Failed to initialize plugins",e)}const st=!1,nt=(e,t)=>e===t,Te={equals:nt};let Fe=He;const j=1,Q=2,Ue={owned:null,cleanups:null,context:null,owner:null};var E=null;let ue=null,ot=null,S=null,C=null,$=null,ne=0;function it(e,t){const r=S,s=E,o=e.length===0,a=t===void 0?s:t,i=o?Ue:{owned:null,cleanups:null,context:a?a.context:null,owner:a},n=o?e:()=>e(()=>oe(()=>G(i)));E=i,S=null;try{return J(n,!0)}finally{S=r,E=s}}function V(e,t){t=t?Object.assign({},Te,t):Te;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=o=>(typeof o=="function"&&(o=o(r.value)),We(r,o));return[lt.bind(r),s]}function X(e,t,r){const s=qe(e,t,!1,j);ie(s)}function Ee(e,t,r){Fe=ut;const s=qe(e,t,!1,j);s.user=!0,$?$.push(s):ie(s)}function oe(e){if(S===null)return e();const t=S;S=null;try{return e()}finally{S=t}}function at(e){Ee(()=>oe(e))}function Ve(e){return E===null||(E.cleanups===null?E.cleanups=[e]:E.cleanups.push(e)),e}function lt(){if(this.sources&&this.state)if(this.state===j)ie(this);else{const e=C;C=null,J(()=>ee(this),!1),C=e}if(S){const e=this.observers?this.observers.length:0;S.sources?(S.sources.push(this),S.sourceSlots.push(e)):(S.sources=[this],S.sourceSlots=[e]),this.observers?(this.observers.push(S),this.observerSlots.push(S.sources.length-1)):(this.observers=[S],this.observerSlots=[S.sources.length-1])}return this.value}function We(e,t,r){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&J(()=>{for(let o=0;o<e.observers.length;o+=1){const a=e.observers[o],i=ue&&ue.running;i&&ue.disposed.has(a),(i?!a.tState:!a.state)&&(a.pure?C.push(a):$.push(a),a.observers&&Ge(a)),i||(a.state=j)}if(C.length>1e6)throw C=[],new Error},!1)),t}function ie(e){if(!e.fn)return;G(e);const t=ne;ct(e,e.value,t)}function ct(e,t,r){let s;const o=E,a=S;S=E=e;try{s=e.fn(t)}catch(i){return e.pure&&(e.state=j,e.owned&&e.owned.forEach(G),e.owned=null),e.updatedAt=r+1,Je(i)}finally{S=a,E=o}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?We(e,s):e.value=s,e.updatedAt=r)}function qe(e,t,r,s=j,o){const a={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:E,context:E?E.context:null,pure:r};return E===null||E!==Ue&&(E.owned?E.owned.push(a):E.owned=[a]),a}function Y(e){if(e.state===0)return;if(e.state===Q)return ee(e);if(e.suspense&&oe(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ne);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===j)ie(e);else if(e.state===Q){const s=C;C=null,J(()=>ee(e,t[0]),!1),C=s}}function J(e,t){if(C)return e();let r=!1;t||(C=[]),$?r=!0:$=[],ne++;try{const s=e();return gt(r),s}catch(s){r||($=null),C=null,Je(s)}}function gt(e){if(C&&(He(C),C=null),e)return;const t=$;$=null,t.length&&J(()=>Fe(t),!1)}function He(e){for(let t=0;t<e.length;t++)Y(e[t])}function ut(e){let t,r=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[r++]=s:Y(s)}for(t=0;t<r;t++)Y(e[t])}function ee(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const o=s.state;o===j?s!==t&&(!s.updatedAt||s.updatedAt<ne)&&Y(s):o===Q&&ee(s,t)}}}function Ge(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Q,r.pure?C.push(r):$.push(r),r.observers&&Ge(r))}}function G(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),s=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){const a=o.pop(),i=r.observerSlots.pop();s<o.length&&(a.sourceSlots[i]=s,o[s]=a,r.observerSlots[s]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)G(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)G(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ft(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Je(e,t=E){throw ft(e)}function mt(e,t){return oe(()=>e(t||{}))}function dt(e,t,r){let s=r.length,o=t.length,a=s,i=0,n=0,l=t[o-1].nextSibling,c=null;for(;i<o||n<a;){if(t[i]===r[n]){i++,n++;continue}for(;t[o-1]===r[a-1];)o--,a--;if(o===i){const p=a<s?n?r[n-1].nextSibling:r[a-n]:l;for(;n<a;)e.insertBefore(r[n++],p)}else if(a===n)for(;i<o;)(!c||!c.has(t[i]))&&t[i].remove(),i++;else if(t[i]===r[a-1]&&r[n]===t[o-1]){const p=t[--o].nextSibling;e.insertBefore(r[n++],t[i++].nextSibling),e.insertBefore(r[--a],p),t[o]=r[a]}else{if(!c){c=new Map;let m=n;for(;m<a;)c.set(r[m],m++)}const p=c.get(t[i]);if(p!=null)if(n<p&&p<a){let m=i,w=1,y;for(;++m<o&&m<a&&!((y=c.get(t[m]))==null||y!==p+w);)w++;if(w>p-n){const x=t[i];for(;n<p;)e.insertBefore(r[n++],x)}else e.replaceChild(r[n++],t[i++])}else i++;else t[i++].remove()}}}const Ce="_$DX_DELEGATE";function pt(e,t,r,s={}){let o;return it(a=>{o=a,t===document?e():Ae(t,e(),t.firstChild?null:void 0,r)},s.owner),()=>{o(),t.textContent=""}}function At(e,t,r,s){let o;const a=()=>{const n=document.createElement("template");return n.innerHTML=e,n.content.firstChild},i=()=>(o||(o=a())).cloneNode(!0);return i.cloneNode=i,i}function ht(e,t=window.document){const r=t[Ce]||(t[Ce]=new Set);for(let s=0,o=e.length;s<o;s++){const a=e[s];r.has(a)||(r.add(a),t.addEventListener(a,bt))}}function Ae(e,t,r,s){if(r!==void 0&&!s&&(s=[]),typeof t!="function")return te(e,t,s,r);X(o=>te(e,t(),o,r),s)}function bt(e){let t=e.target;const r=`$$${e.type}`,s=e.target,o=e.currentTarget,a=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),i=()=>{const l=t[r];if(l&&!t.disabled){const c=t[`${r}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&a(t.host),!0},n=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();a(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!i());c++){if(t._$host){t=t._$host,n();break}if(t.parentNode===o)break}}else n();a(s)}function te(e,t,r,s,o){for(;typeof r=="function";)r=r();if(t===r)return r;const a=typeof t,i=s!==void 0;if(e=i&&r[0]&&r[0].parentNode||e,a==="string"||a==="number"){if(a==="number"&&(t=t.toString(),t===r))return r;if(i){let n=r[0];n&&n.nodeType===3?n.data!==t&&(n.data=t):n=document.createTextNode(t),r=U(e,r,s,n)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||a==="boolean")r=U(e,r,s);else{if(a==="function")return X(()=>{let n=t();for(;typeof n=="function";)n=n();r=te(e,n,r,s)}),()=>r;if(Array.isArray(t)){const n=[],l=r&&Array.isArray(r);if(he(n,t,r,o))return X(()=>r=te(e,n,r,s,!0)),()=>r;if(n.length===0){if(r=U(e,r,s),i)return r}else l?r.length===0?Ie(e,n,s):dt(e,r,n):(r&&U(e),Ie(e,n));r=n}else if(t.nodeType){if(Array.isArray(r)){if(i)return r=U(e,r,s,t);U(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function he(e,t,r,s){let o=!1;for(let a=0,i=t.length;a<i;a++){let n=t[a],l=r&&r[e.length],c;if(!(n==null||n===!0||n===!1))if((c=typeof n)=="object"&&n.nodeType)e.push(n);else if(Array.isArray(n))o=he(e,n,l)||o;else if(c==="function")if(s){for(;typeof n=="function";)n=n();o=he(e,Array.isArray(n)?n:[n],Array.isArray(l)?l:[l])||o}else e.push(n),o=!0;else{const p=String(n);l&&l.nodeType===3&&l.data===p?e.push(l):e.push(document.createTextNode(p))}}return o}function Ie(e,t,r=null){for(let s=0,o=t.length;s<o;s++)e.insertBefore(t[s],r)}function U(e,t,r,s){if(r===void 0)return e.textContent="";const o=s||document.createTextNode("");if(t.length){let a=!1;for(let i=t.length-1;i>=0;i--){const n=t[i];if(o!==n){const l=n.parentNode===e;!a&&!i?l?e.replaceChild(o,n):e.insertBefore(o,r):l&&n.remove()}else a=!0}}else e.insertBefore(o,r);return[o]}const yt=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,B=yt;function Ke(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var K={exports:{}},_e;function xt(){if(_e)return K.exports;_e=1;const e=r=>typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?()=>{const s=crypto.getRandomValues(new Uint8Array(1))[0];return(s>=r?s%r:s).toString(r)}:()=>Math.floor(Math.random()*r).toString(r),t=(r=7,s=!1)=>Array.from({length:r},e(s?16:36)).join("");return K.exports=t,K.exports.default=t,K.exports}var wt=xt();const re=Ke(wt);var vt=()=>`uid::${re(7)}`,St=(e,t=["endpointName","fingerprint"])=>typeof e=="object"&&e!==null&&t.every(r=>r in e),Et=e=>{if(!St(e))throw new TypeError("Invalid connection args");return JSON.stringify(e)},Pt=()=>{let e=[];return{add:(...t)=>{e=[...e,...t]},remove:t=>{e=typeof t=="string"?e.filter(r=>r.message.transactionId!==t):e.filter(r=>!t.includes(r))},entries:()=>e}},fe=class{static toBackground(e,t){return e.postMessage(t)}static toExtensionContext(e,t){return e.postMessage(t)}},z={exports:{}},Tt=z.exports,Me;function Ct(){return Me||(Me=1,function(e,t){(function(r,s){s(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Tt,function(r){if(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const s="The message port closed before a response was received.",o="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",a=i=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(n).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class l extends WeakMap{constructor(u,d=void 0){super(d),this.createItem=u}get(u){return this.has(u)||this.set(u,this.createItem(u)),super.get(u)}}const c=g=>g&&typeof g=="object"&&typeof g.then=="function",p=(g,u)=>(...d)=>{i.runtime.lastError?g.reject(new Error(i.runtime.lastError.message)):u.singleCallbackArg||d.length<=1&&u.singleCallbackArg!==!1?g.resolve(d[0]):g.resolve(d)},m=g=>g==1?"argument":"arguments",w=(g,u)=>function(b,...T){if(T.length<u.minArgs)throw new Error(`Expected at least ${u.minArgs} ${m(u.minArgs)} for ${g}(), got ${T.length}`);if(T.length>u.maxArgs)throw new Error(`Expected at most ${u.maxArgs} ${m(u.maxArgs)} for ${g}(), got ${T.length}`);return new Promise((M,D)=>{if(u.fallbackToNoCallback)try{b[g](...T,p({resolve:M,reject:D},u))}catch(f){console.warn(`${g} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,f),b[g](...T),u.fallbackToNoCallback=!1,u.noCallback=!0,M()}else u.noCallback?(b[g](...T),M()):b[g](...T,p({resolve:M,reject:D},u))})},y=(g,u,d)=>new Proxy(u,{apply(b,T,M){return d.call(T,g,...M)}});let x=Function.call.bind(Object.prototype.hasOwnProperty);const h=(g,u={},d={})=>{let b=Object.create(null),T={has(D,f){return f in g||f in b},get(D,f,N){if(f in b)return b[f];if(!(f in g))return;let P=g[f];if(typeof P=="function")if(typeof u[f]=="function")P=y(g,g[f],u[f]);else if(x(d,f)){let F=w(f,d[f]);P=y(g,g[f],F)}else P=P.bind(g);else if(typeof P=="object"&&P!==null&&(x(u,f)||x(d,f)))P=h(P,u[f],d[f]);else if(x(d,"*"))P=h(P,u[f],d["*"]);else return Object.defineProperty(b,f,{configurable:!0,enumerable:!0,get(){return g[f]},set(F){g[f]=F}}),P;return b[f]=P,P},set(D,f,N,P){return f in b?b[f]=N:g[f]=N,!0},defineProperty(D,f,N){return Reflect.defineProperty(b,f,N)},deleteProperty(D,f){return Reflect.deleteProperty(b,f)}},M=Object.create(g);return new Proxy(M,T)},A=g=>({addListener(u,d,...b){u.addListener(g.get(d),...b)},hasListener(u,d){return u.hasListener(g.get(d))},removeListener(u,d){u.removeListener(g.get(d))}}),I=new l(g=>typeof g!="function"?g:function(d){const b=h(d,{},{getContent:{minArgs:0,maxArgs:0}});g(b)});let O=!1;const v=new l(g=>typeof g!="function"?g:function(d,b,T){let M=!1,D,f=new Promise(H=>{D=function(L){O||(console.warn(o,new Error().stack),O=!0),M=!0,H(L)}}),N;try{N=g(d,b,D)}catch(H){N=Promise.reject(H)}const P=N!==!0&&c(N);if(N!==!0&&!P&&!M)return!1;const F=H=>{H.then(L=>{T(L)},L=>{let ge;L&&(L instanceof Error||typeof L.message=="string")?ge=L.message:ge="An unexpected error occurred",T({__mozWebExtensionPolyfillReject__:!0,message:ge})}).catch(L=>{console.error("Failed to send onMessage rejected reply",L)})};return F(P?N:f),!0}),k=({reject:g,resolve:u},d)=>{i.runtime.lastError?i.runtime.lastError.message===s?u():g(new Error(i.runtime.lastError.message)):d&&d.__mozWebExtensionPolyfillReject__?g(new Error(d.message)):u(d)},_=(g,u,d,...b)=>{if(b.length<u.minArgs)throw new Error(`Expected at least ${u.minArgs} ${m(u.minArgs)} for ${g}(), got ${b.length}`);if(b.length>u.maxArgs)throw new Error(`Expected at most ${u.maxArgs} ${m(u.maxArgs)} for ${g}(), got ${b.length}`);return new Promise((T,M)=>{const D=k.bind(null,{resolve:T,reject:M});b.push(D),d.sendMessage(...b)})},le={devtools:{network:{onRequestFinished:A(I)}},runtime:{onMessage:A(v),onMessageExternal:A(v),sendMessage:_.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:_.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},ce={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":ce},services:{"*":ce},websites:{"*":ce}},h(i,le,n)};r.exports=a(chrome)}else r.exports=globalThis.browser})}(z)),z.exports}var It=Ct();const _t=Ke(It);var Mt=(e="")=>{const t=vt();let r,s=[];const o=Pt(),a=new Set,i=new Set,n=(c,p)=>{switch(c.status){case"undeliverable":s.some(m=>m.message.messageID===c.message.messageID)||(s=[...s,{message:c.message,resolvedDestination:c.resolvedDestination}]);return;case"deliverable":s=s.reduce((m,w)=>w.resolvedDestination===c.deliverableTo?(fe.toBackground(p,{type:"deliver",message:w.message}),m):[...m,w],[]);return;case"delivered":c.receipt.message.messageType==="message"&&o.add(c.receipt);return;case"incoming":c.message.messageType==="reply"&&o.remove(c.message.messageID),a.forEach(m=>m(c.message,p));return;case"terminated":{const m=o.entries().filter(w=>c.fingerprint===w.to);o.remove(m),m.forEach(({message:w})=>i.forEach(y=>y(w)))}}},l=()=>{r=_t.runtime.connect({name:Et({endpointName:e,fingerprint:t})}),r.onMessage.addListener(n),r.onDisconnect.addListener(l),fe.toBackground(r,{type:"sync",pendingResponses:o.entries(),pendingDeliveries:[...new Set(s.map(({resolvedDestination:c})=>c))]})};return l(),{onFailure(c){i.add(c)},onMessage(c){a.add(c)},postMessage(c){fe.toBackground(r,{type:"deliver",message:c})}}},Ot=Object.defineProperty,kt=Object.defineProperties,Dt=Object.getOwnPropertyDescriptors,Oe=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable,ke=(e,t,r)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ze=(e,t)=>{for(var r in t||(t={}))Nt.call(t,r)&&ke(e,r,t[r]);if(Oe)for(var r of Oe(t))Bt.call(t,r)&&ke(e,r,t[r]);return e},Ze=(e,t)=>kt(e,Dt(t)),Lt=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,Qe=e=>{const[,t,r,s]=e.match(Lt)||[];return{context:t,tabId:+r,frameId:s?+s:void 0}};const $t=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],be=Symbol(".toJSON was called"),jt=e=>{e[be]=!0;const t=e.toJSON();return delete e[be],t},Xe=({from:e,seen:t,to_:r,forceEnumerable:s,maxDepth:o,depth:a})=>{const i=r||(Array.isArray(e)?[]:{});if(t.push(e),a>=o)return i;if(typeof e.toJSON=="function"&&e[be]!==!0)return jt(e);for(const[n,l]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(l)){i[n]="[object Buffer]";continue}if(l!==null&&typeof l=="object"&&typeof l.pipe=="function"){i[n]="[object Stream]";continue}if(typeof l!="function"){if(!l||typeof l!="object"){i[n]=l;continue}if(!t.includes(e[n])){a++,i[n]=Xe({from:e[n],seen:[...t],forceEnumerable:s,maxDepth:o,depth:a});continue}i[n]="[Circular]"}}for(const{property:n,enumerable:l}of $t)typeof e[n]=="string"&&Object.defineProperty(i,n,{value:e[n],enumerable:!0,configurable:!0,writable:!0});return i};function Rt(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=t;return typeof e=="object"&&e!==null?Xe({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}let Ye=()=>({events:{},emit(e,...t){(this.events[e]||[]).forEach(r=>r(...t))},on(e,t){return(this.events[e]=this.events[e]||[]).push(t),()=>this.events[e]=(this.events[e]||[]).filter(r=>r!==t)}});var Ft=(e,t,r)=>{const s=re(),o=new Map,a=new Map,i=n=>{if(n.destination.context===e&&!n.destination.frameId&&!n.destination.tabId){const{transactionId:l,messageID:c,messageType:p}=n,m=()=>{const y=o.get(l);if(y){const{err:x,data:h}=n;if(x){const A=x,I=self[A.name],O=new(typeof I=="function"?I:Error)(A.message);for(const v in A)O[v]=A[v];y.reject(O)}else y.resolve(h);o.delete(l)}},w=async()=>{let y,x,h=!1;try{const A=a.get(c);if(typeof A=="function")y=await A({sender:n.origin,id:c,data:n.data,timestamp:n.timestamp});else throw h=!0,new Error(`[webext-bridge] No handler registered in '${e}' to accept messages with id '${c}'`)}catch(A){x=A}finally{if(x&&(n.err=Rt(x)),i(Ze(ze({},n),{messageType:"reply",data:y,origin:{context:e,tabId:null},destination:n.origin,hops:[]})),x&&!h)throw y}};switch(p){case"reply":return m();case"message":return w()}}return n.hops.push(`${e}::${s}`),t(n)};return{handleMessage:i,endTransaction:n=>{const l=o.get(n);l?.reject("Transaction was ended before it could complete"),o.delete(n)},sendMessage:(n,l,c="background")=>{const p=typeof c=="string"?Qe(c):c,m="Bridge#sendMessage ->";if(!p.context)throw new TypeError(`${m} Destination must be any one of known destinations`);return new Promise((w,y)=>{const x={messageID:n,data:l,destination:p,messageType:"message",transactionId:re(),origin:{context:e,tabId:null},hops:[],timestamp:Date.now()};o.set(x.transactionId,{resolve:w,reject:y});try{i(x)}catch(h){o.delete(x.transactionId),y(h)}})},onMessage:(n,l)=>(a.set(n,l),()=>a.delete(n))}},W=class{constructor(e,t){this.endpointRuntime=e,this.streamInfo=t,this.emitter=Ye(),this.isClosed=!1,this.handleStreamClose=()=>{this.isClosed||(this.isClosed=!0,this.emitter.emit("closed",!0),this.emitter.events={})},W.initDone||(e.onMessage("__crx_bridge_stream_transfer__",r=>{const{streamId:s,streamTransfer:o,action:a}=r.data,i=W.openStreams.get(s);i&&!i.isClosed&&(a==="transfer"&&i.emitter.emit("message",o),a==="close"&&(W.openStreams.delete(s),i.handleStreamClose()))}),W.initDone=!0),W.openStreams.set(this.streamInfo.streamId,this)}get info(){return this.streamInfo}send(e){if(this.isClosed)throw new Error("Attempting to send a message over closed stream. Use stream.onClose(<callback>) to keep an eye on stream status");this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:e,action:"transfer"},this.streamInfo.endpoint)}close(e){e&&this.send(e),this.handleStreamClose(),this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:null,action:"close"},this.streamInfo.endpoint)}onMessage(e){return this.getDisposable("message",e)}onClose(e){return this.getDisposable("closed",e)}getDisposable(e,t){const r=this.emitter.on(e,t);return Object.assign(r,{dispose:r,close:r})}},se=W;se.initDone=!1;se.openStreams=new Map;var Ut=e=>{const t=new Map,r=new Map,s=Ye();e.onMessage("__crx_bridge_stream_open__",i=>new Promise(n=>{const{sender:l,data:c}=i,{channel:p}=c;let m=!1,w=()=>{};const y=()=>{const x=r.get(p);typeof x=="function"?(x(new se(e,Ze(ze({},c),{endpoint:l}))),m&&w(),n(!0)):m||(m=!0,w=s.on("did-change-stream-callbacks",y))};y()}));async function o(i,n){if(t.has(i))throw new Error("webext-bridge: A Stream is already open at this channel");const l=typeof n=="string"?Qe(n):n,c={streamId:re(),channel:i,endpoint:l},p=new se(e,c);return p.onClose(()=>t.delete(i)),await e.sendMessage("__crx_bridge_stream_open__",c,l),t.set(i,p),p}function a(i,n){if(r.has(i))throw new Error("webext-bridge: This channel has already been claimed. Stream allows only one-on-one communication");r.set(i,n),s.emit("did-change-stream-callbacks")}return{openStream:o,onOpenStreamChannel:a}},et=Mt("popup"),Pe=Ft("popup",e=>et.postMessage(e));et.onMessage(Pe.handleMessage);var{sendMessage:me,onMessage:nr}=Pe;Ut(Pe);const ye=(e,t)=>t.some(r=>e instanceof r);let De,Ne;function Vt(){return De||(De=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wt(){return Ne||(Ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xe=new WeakMap,de=new WeakMap,ae=new WeakMap;function qt(e){const t=new Promise((r,s)=>{const o=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{r(R(e.result)),o()},i=()=>{s(e.error),o()};e.addEventListener("success",a),e.addEventListener("error",i)});return ae.set(t,e),t}function Ht(e){if(xe.has(e))return;const t=new Promise((r,s)=>{const o=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{r(),o()},i=()=>{s(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});xe.set(e,t)}let we={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return xe.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return R(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function tt(e){we=e(we)}function Gt(e){return Wt().includes(e)?function(...t){return e.apply(ve(this),t),R(this.request)}:function(...t){return R(e.apply(ve(this),t))}}function Jt(e){return typeof e=="function"?Gt(e):(e instanceof IDBTransaction&&Ht(e),ye(e,Vt())?new Proxy(e,we):e)}function R(e){if(e instanceof IDBRequest)return qt(e);if(de.has(e))return de.get(e);const t=Jt(e);return t!==e&&(de.set(e,t),ae.set(t,e)),t}const ve=e=>ae.get(e);function Kt(e,t,{blocked:r,upgrade:s,blocking:o,terminated:a}={}){const i=indexedDB.open(e,t),n=R(i);return s&&i.addEventListener("upgradeneeded",l=>{s(R(i.result),l.oldVersion,l.newVersion,R(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),n.then(l=>{a&&l.addEventListener("close",()=>a()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),n}const zt=["get","getKey","getAll","getAllKeys","count"],Zt=["put","add","delete","clear"],pe=new Map;function Be(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(pe.get(t))return pe.get(t);const r=t.replace(/FromIndex$/,""),s=t!==r,o=Zt.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(o||zt.includes(r)))return;const a=async function(i,...n){const l=this.transaction(i,o?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(n.shift())),(await Promise.all([c[r](...n),o&&l.done]))[0]};return pe.set(t,a),a}tt(e=>({...e,get:(t,r,s)=>Be(t,r)||e.get(t,r,s),has:(t,r)=>!!Be(t,r)||e.has(t,r)}));const Qt=["continue","continuePrimaryKey","advance"],Le={},Se=new WeakMap,rt=new WeakMap,Xt={get(e,t){if(!Qt.includes(t))return e[t];let r=Le[t];return r||(r=Le[t]=function(...s){Se.set(this,rt.get(this)[t](...s))}),r}};async function*Yt(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,Xt);for(rt.set(r,t),ae.set(r,ve(t));t;)yield r,t=await(Se.get(r)||t.continue()),Se.delete(r)}function $e(e,t){return t===Symbol.asyncIterator&&ye(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&ye(e,[IDBIndex,IDBObjectStore])}tt(e=>({...e,get(t,r,s){return $e(t,r)?Yt:e.get(t,r,s)},has(t,r){return $e(t,r)||e.has(t,r)}}));class q{db;static instance;listeners;constructor(){this.db=Kt("magpie-settings-db",2,{upgrade(t){t.objectStoreNames.contains("settings")||t.createObjectStore("settings",{keyPath:"key"})}}),this.listeners=new Map}static getInstance(){return q.instance||(q.instance=new q),q.instance}async getSetting(t){try{return(await(await this.db).get("settings",t))?.value}catch(r){console.error(`Error retrieving setting "${t}":`,r);return}}async setSetting(t,r){try{await(await this.db).put("settings",{key:t,value:r}),this.notifyListeners(t,r)}catch(s){throw console.error(`Error storing setting "${t}":`,s),s}}subscribe(t,r){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t)?.add(r),()=>{this.listeners.get(t)?.delete(r)}}notifyListeners(t,r){this.listeners.get(t)?.forEach(s=>s(r))}}const Z=q.getInstance();function er(e,t){const[r,s]=V(t);return Ee(()=>{console.log(`Syncing with settings key: "${e}"`),Z.getSetting(e).then(i=>{i!==void 0&&s(()=>i)});const a=Z.subscribe(e,i=>{s(()=>i)});Ve(()=>{console.log(`Unsubscribing from settings key: "${e}"`),a()})}),[r,async a=>{await Z.setSetting(e,a)}]}function je(e){try{const r=new URL(e).hostname.split(".");if(r[0]!=="shopee")return null;if(r.length>=2)return r[r.length-1]}catch(t){return console.error("Invalid URL:",t),null}return null}const Re=async()=>{try{const t=(await B.tabs.query({active:!0,currentWindow:!0})).find(s=>s.url?.includes("shopee"));if(console.log("Active Shopee tab found:",t),t)return t;const r=await B.tabs.query({url:["*://*.shopee.co.id/*","*://*.shopee.com.my/*","*://*.shopee.ph/*","*://*.shopee.sg/*","*://*.shopee.co.th/*","*://*.shopee.vn/*"]});return console.log("Found Shopee tabs:",r),r[0]||null}catch(e){return console.error("Error finding Shopee tab:",e),null}};var tr=At('<div><h2>Autohoarder Extension</h2><p>Version: </p><p>Region: </p><div><label for=email-input>Email:</label><input id=email-input type=email placeholder="Enter your email">');const rr="autohoarder-1.0.1",sr=()=>{const[e,t]=V(""),[r,s]=V(!1),[o,a]=V(!1),[i,n]=V("id"),[l,c]=er("email",""),[p,m]=V(!1),w=async()=>{const A=(await B.tabs.query({})).filter(I=>I.url&&je(I.url));return m(A.length>1),A.length},y=async h=>{const A=je(h);A?(s(!0),n(A),t(h),await w()):(s(!1),t(""),m(!1))};Ee(async()=>{const h=async()=>{try{const v=await me("getBackgroundState",{});console.log("Background state:",v),v&&a(v.isFetching)}catch(v){console.error("Error updating background state:",v)}};h();const A=(v,k)=>{k.status==="complete"&&h()},I=(v,k,_)=>{k.status==="complete"&&_.active&&_.url&&y(_.url)},O=async v=>{const k=await B.tabs.get(v.tabId);k.url&&y(k.url)};B.tabs.onUpdated.addListener(I),B.tabs.onActivated.addListener(O),B.tabs.onUpdated.addListener(A),B.tabs.query({active:!0,currentWindow:!0}).then(async v=>{v[0]?.url&&y(v[0].url)}),Ve(()=>{B.tabs.onUpdated.removeListener(I),B.tabs.onActivated.removeListener(O),B.tabs.onUpdated.removeListener(A)})}),at(async()=>{try{if(!(await Re())?.id)return;const A=await me("getBackgroundState",{});console.log("Background state:",A),A&&a(A.isFetching)}catch(h){console.error("Error initializing popup state:",h)}});const x=async h=>{c(h),await Z.setSetting("email",h);const A=await Re();A?.id&&await me("updateEmail",{email:h},{context:"content-script",tabId:A.id})};return(()=>{var h=tr(),A=h.firstChild,I=A.nextSibling;I.firstChild;var O=I.nextSibling;O.firstChild;var v=O.nextSibling,k=v.firstChild,_=k.nextSibling;return h.style.setProperty("padding","16px"),h.style.setProperty("width","320px"),Ae(I,rr,null),Ae(O,i,null),v.style.setProperty("margin-bottom","16px"),k.style.setProperty("display","block"),k.style.setProperty("margin-bottom","4px"),_.$$input=le=>x(le.currentTarget.value),_.style.setProperty("width","100%"),_.style.setProperty("padding","8px"),_.style.setProperty("border","1px solid #ccc"),_.style.setProperty("border-radius","4px"),_.style.setProperty("box-sizing","border-box"),X(()=>_.value=l()),h})()};ht(["input"]);pt(()=>mt(sr,{}),document.getElementById("root"));
